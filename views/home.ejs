<!DOCTYPE html>
<html>
  <link rel="stylesheet" type="text/css" href="./file/style.css" />

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
    crossorigin="anonymous"
  />

  <link rel="stylesheet" href="./file/home.css" type="text/css">

  <head>
    <title>File host</title>
  </head>

  <body>
    <% if( type=='guest' ) { %>
    <h1>you cant do anything</h1>
    <% } else if( type=='basic' ){ %>
		<main>
    <h1>welcolm Back user</h1>

    <ul class="nav nav-pills">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="#">Files</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Actions</a>
      </li>
    </ul>

    <main class="Files">
      <form
        action="/"
        enctype="multipart/form-data"
        method="post"
        id="select"
        onsubmit="return check()"
      >
        <div class="drop-zone" id="holder">
          <span class="drop-zone__prompt" id="txt"
            >Drop file here or click to upload</span
          >
          <input
            type="file"
            name="upload"
            id="files"
            class="drop-zone__input"
            multiple
          />
        </div>

        <input type="submit" value="upload" id="send" />
      </form>

      <div id="formFile"></div>

      <!-- 
	  
			  <input type="submit" value="Upload" id="click"/>
		  -->

      <form action="/home/open" method="get" id="file">
        <input type="hidden" id="Name2" value="" name="name" />
      </form>

      <div id="place"></div>

      <div id="allFiles"></div>
    </main>

    <main class="Actions">
      <hr />
      <label for="form">Change your username</label>
      <form action="/basic/usernameChange" method="post">
        <label for="password">Password:</label>
        <input type="password" name="password" value="" />
        <br />
        <label for="N_username">New Username:</label>
        <input type="text" name="N_username" value="" />
        <br />
        <input type="submit" value="Submit" />
      </form>
      <hr />
      <label for="form">Change your password</label>
      <form action="/basic/passwordChange" method="post">
        <label for="password">Password:</label>
        <input type="password" name="password" value="" />
        <br />
        <label for="N_password">New Password:</label>
        <input type="text" name="N_password" value="" />
        <br />
        <input type="submit" value="Submit" />
      </form>

      <label for="form">Delete a account</label>
      <form action="/basic/softRemove" method="post">
        <label for="password">Password:</label>
        <input type="password" name="password" value="" />
        <br />
        <input type="submit" value="Submit" />
      </form>
    </main>

    <script>
      const nav_link = document.querySelectorAll(".nav-link");
      var tabs = [...nav_link].map((x) => x.innerHTML);

      document.querySelector("." + tabs[1].toString()).style.display = "none";
      document.querySelector("." + tabs[0].toString()).style.display = "block";

      nav_link.forEach(function (html) {
        html.addEventListener("click", function (e) {
          if (e.target.innerHTML == tabs[0]) {
            nav_link[1].classList.remove("active");
            nav_link[0].classList.add("active");

            document.querySelector("." + tabs[1].toString()).style.display =
              "none";
            document.querySelector("." + tabs[0].toString()).style.display =
              "block";
          }

          if (e.target.innerHTML == tabs[1]) {
            nav_link[0].classList.remove("active");
            nav_link[1].classList.add("active");

            document.querySelector("." + tabs[0].toString()).style.display =
              "none";
            document.querySelector("." + tabs[1].toString()).style.display =
              "block";
          }
        });
      });
    </script>
	</main>
    <% } else if( type=='admin' ){ %>
    <main>
      <h1>you can do anything</h1>
      <div class="tableData"></div>

	  <script src="./file/home.js"></script>

    </main>
    <% } else { %>
    <a>there seems to be an error</a>
    <% } %>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="./file/index.js"></script>
  </body>
</html>

<a href="/logout">logout</a>
